#pragma once
#ifdef _cplusplus
extern "C" {
#endif

#include <algorithm>
#include <cstring>

#include "predef/architecture.h"
#include "predef/compiler.h"
#include "predef/language.h"
#include "predef/os.h"
#include "predef/other.h"
#include "predef/platform.h"
#include "predef/version.h"

#ifdef _cplusplus
    #include <vulkan/vulkan.hpp>
#else
    #include <vulkan/vulkan.h>
#endif

#define GLFW_INCLUDE_NONE
#define GLFW_INCLUDE_VULKAN
// Include GLFW Headers
#include <GLFW/glfw3.h>

/**
 * @brief Macro for defining the export/import attribute of a function 
 */
#ifdef DG_C
    #if BOOST_OS_WINDOWS && defined(DRAGON_BUILD_DLL)
        #define DGAPI extern "C" __declspec(dllexport)
    #elif BOOST_OS_WINDOWS && defined(DRAGON_DLL)
        #define DGAPI extern "C" __declspec(dllimport)
    #elif defined(__GNUC__) && defined(DRAGON_BUILD_DLL)
        #define DGAPI extern "C" __attribute__((visibility("default")))
    #else
        #define DGAPI extern "C"
    #endif
#else
    #if BOOST_OS_WINDOWS && defined(DRAGON_BUILD_DLL)
        #define DGAPI __declspec(dllexport)
    #elif BOOST_OS_WINDOWS && defined(DRAGON_DLL)
        #define DGAPI __declspec(dllimport)
    #elif defined(__GNUC__) && defined(DRAGON_BUILD_DLL)
        #define DGAPI __attribute__((visibility("default")))
    #else
        #define DGAPI 
    #endif
#endif

/**
 * @brief Macro for creating the version number for Dragon Engine
 */
#ifdef VK_MAKE_API_VERSION
    #define DRAGON_VERSION VK_MAKE_API_VERSION(@Dragon_VERSION_MAJOR@, @Dragon_VERSION_MINOR@, @Dragon_VERSION_PATCH@, @Dragon_VERSION_TWEAK@)
#else
    #define DRAGON_VERSION VK_MAKE_VERSION(@Dragon_VERSION_MAJOR@, @Dragon_VERSION_MINOR@, @Dragon_VERSION_PATCH@)
#endif

/**
 * @brief Macro for creating the version number for the application
 */
#ifndef APP_VERSION
    #ifdef VK_MAKE_API_VERSION
        #define APP_VERSION VK_MAKE_API_VERSION(1, 0, 0, 0)
    #else  
        #define APP_VERSION VK_MAKE_VERSION(1, 0, 0)
    #endif
#endif

/**
 * @brief Macro for the name of the application
 */
#ifndef APP_NAME
    #define APP_NAME "dgEngine"
#endif

// Define basic types for consistency with dependencies
typedef VkBool32 DgBool32;
#define DG_TRUE GLFW_TRUE
#define DG_FALSE GLFW_FALSE
typedef uint_fast64_t DgUInt64;
typedef int_fast64_t DgInt64;
typedef uint_fast32_t DgUInt32;
typedef int_fast32_t DgInt32;

#ifdef _cplusplus
} // dragon/dragon_core.h
#endif